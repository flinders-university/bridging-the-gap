<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student Blog Report</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,700" rel="stylesheet">
    <style>
      body { font-family: 'Open Sans', sans-serif; font-size: 14px; }
      hr {
        -webkit-box-sizing: content-box;
           -moz-box-sizing: content-box;
                box-sizing: content-box;
        height: 0;
      }
      hr {
        margin-top: 20px;
        margin-bottom: 20px;
        border: 0;
        border-top: 1px solid #eeeeee;
      }
      .page-break {
        page-break-before: always;
      }
      .page-break:last-child {
        page-break-before: avoid;
      }
      .card {
        border: 1px solid #eeeeee;
        padding: 0px 15px;
      }
    </style>
  </head>
  <body>
    <h1 style="margin-bottom: -6px; margin-top: 4px;">Student Blog Report</h1>
    <p><em>Updated: <%= Date.today.strftime("#{Date.today.day.ordinalize} of %B %Y") %></em></p>
    <p style="font-size: 12px;">Student information is <strong>strictly confidential</strong> and its use is governed by the University policy on Access to Student Information.</p>

    <hr>
    <% @student_blogs.each do |blog| %>
    <div class="blog">
      <h3 style="margin-bottom: -6px; margin-top: 4px;">Blog: <%= blog.title %></h3>
      <p><strong>Student:</strong> <%= blog.user.addressable %></p>
      <div class="card">
        <%= mdrender(blog.body).html_safe %>
      </div>
    </div>

    <% if params[:break] %>
    <div class="page-break"></div>
    <% else %>
    <hr>
    <% end %>
    <% end %>

  </body>
</html>
